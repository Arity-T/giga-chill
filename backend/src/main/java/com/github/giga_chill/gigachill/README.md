# Тестовая реализация авторизации
## Стрктура и назначение
В папке **/model** хранятся DTO:
- `AuthRequest` для запроса (логин пароль).
- `AuthResponse` для ответа (токен).
- `UserInfo` для данных пользователя (имя пользователя).

В папке **/security** немного всё намешано:
- `JwtService` для создания и валидации JWT. Токен генерируется на 24 часа.
- `JwtFilter` достаёт токен из тела запроса, валидирует и подставляет пользователя.
- `InMemoryUserService` для хранения пользователей (имитации БД), чтобы проверить регистрацию.
- `SecurityConfig` для настройки Spring Security (защита + фильтр).

В папке **/controller**:
- `AuthController` для эндпоинтов.
- `GlobalExceptionHandler` для обработки ошибок.

## Запуск приложения
Перед запуском необходимо сбилдить приложение:
```pwsh
./gradlew build
```

Далее можем его запустить:
```pwsh
./gradlew bootRun
```

После запуска приложения можем перейти к проверке эндпоинтов.

## Проверка эндпоинтов
- **Регистрация:**
```pwsh
curl -X POST http://localhost:3000/auth/register -H "Content-Type: application/json" -d '{"login":"vlad", "password":"securepass"}'
```
Регистрируется новый пользователь, в ответ приходит токен для него. При повторной регистрации должна быть ошибка.

- **Логин:**
```pwsh
curl -X POST http://localhost:3000/auth/login -H "Content-Type: application/json" -d '{"login":"vlad", "password":"securepass"}'
```
Входим по имени пользователя и паролю, в ответ приходит токен.

- **Эндпоинт /me:**
```pwsh
curl -X GET http://localhost:3000/auth/me -H "Authorization: Bearer ВАШ_ТОКЕН"
```
На место `ВАШ_ТОКЕН` вставляем токен, который нам вернула система при логине/регистрации. Без токена должна быть ошибка.