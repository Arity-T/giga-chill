# Исполнение и проверка задач

## Взятие в исполнение задачи

**Цель:**  
Проверить, что участник мероприятия может взять в исполнение задачу со статусом **"Открыта"**.  
- Если исполнитель назначен заранее — только он может взять задачу в работу.  
- Если исполнитель **не назначен**, задачу может взять **любой участник** мероприятия.

**Предусловия:**  
- Пользователь авторизован в системе  
- Пользователь является участником мероприятия  
- Существует задача (например, `Взять плед`)   
- Задача имеет статус **"Открыта"**  
- Страница задач: https://giga-chill.ru/events/{event_id}/tasks 
  *(где `{event_id}` — ID конкретного мероприятия)*

**Шаги:**  
1. Убедиться, что вы находитесь на странице задач мероприятия.  
2. Найти задачу **"Взять плед"** и нажать на неё.  
3. В открывшемся окне нажать кнопку **"Взять в работу"**.

**Ожидаемый результат:**  
- Открывается расширенное окно задачи  
- Статус задачи меняется на **"В работе"**  
- Если заранее не был назначен исполнитель:
    - исполнителем становится текущий пользователь  
    - другие участники больше не могут взять эту задачу в исполнение  
- Если задача не будет выполнена до указанного срока, её статус автоматически перейдёт в **"Не выполнена"**
- Если задача была привязана к списку покупок:
    - В списках покупок у привязанного списка меняется статус на "В процессе покупки"
    - Никто из потребителей больше не может редактировать список


## Выполнение задачи, не привязанной к списку покупок

**Цель:**  
Проверить, что участник мероприятия, являющийся исполнителем задачи и взявший её в работу, может отправить её на проверку после выполнения.

**Предусловия:**  
- Пользователь авторизован в системе  
- Пользователь является участником мероприятия и **исполнителем** задачи (например, `Взять плед`)  
- Существует задача `Взять плед`, не привязанная к списку покупок 
- Задача находится в статусе **"В работе"**  
- Страница задач:  
  https://giga-chill.ru/events/{event_id}/tasks 
  *(где `{event_id}` — ID конкретного мероприятия)*

**Шаги:**  
1. Убедиться, что вы находитесь на странице задач мероприятия.  
2. Найти задачу **"Взять плед"** и открыть её.  
   (Если окно задачи не закрывалось после взятия в работу — продолжить с ним работу.)  
3. В поле **"Отправить на проверку"** ввести комментарий:  
   `пледы взяла, положила в сумку`  
4. Нажать кнопку **"На проверку"**.

**Ожидаемый результат:**  
- Окно задачи закрывается  
- Статус задачи меняется на **"На проверке"**  
- Статус отображается всем участникам мероприятия  
- У **администраторов** и **создателя мероприятия** появляется возможность проверить выполнение задачи


## Выполнение задачи, привязанной к списку покупок

**Цель:**  
Проверить, что участник мероприятия, являющийся исполнителем задачи и взявший её в работу, может отправить её на проверку после выполнения, указав купленные товары и бюджет.

**Предусловия:**  
- Пользователь авторизован в системе  
- Пользователь является участником мероприятия и **исполнителем** задачи (например, `Купить напитки`)  
- Существует задача `Купить напитки`, привязанная к списку покупок  
- Задача имеет статус **"В работе"**  
- Страница задач мероприятия:  
  https://giga-chill.ru/events/{event_id}/tasks  
  *(где `{event_id}` — ID конкретного мероприятия)*

**Шаги:**  
1. Убедиться, что вы находитесь на странице задач мероприятия  
2. Найти задачу **"Купить напитки"** и открыть её  
   *(если окно не закрывалось после взятия в работу — продолжить работу в нём)*  
3. В блоке **"Список покупок"**:
   - Нажать на название списка **"Напитки"**
   - Отметить галочками купленные товары (например, `Кола 3 л`)
   - Ввести в поле **"Бюджет"** сумму, потраченную на покупку (например, `400`)
   - Нажать галочку рядом с полем, чтобы сохранить бюджет  
4. В поле **"Отправить на проверку"** ввести комментарий, например:  
   `купила честно, в ленте`  
5. Нажать кнопку **"На проверку"**

**Ожидаемый результат:**  
- Окно задачи закрывается  
- Статус задачи меняется на **"На проверке"**  
- В разделе "Списки покупок" у привязанного списка купленные продукты отображаются как зачеркнутые в списке    
- Статус списка **"Напитки"** остается **"В процессе покупки"**  
- Задача и её статус **"На проверке"** отображаются всем участникам мероприятия  
- Только **администраторы** и **создатель мероприятия** могут подтвердить выполнение задачи  
- После отправки задачи на проверку:
  - Потребители больше не могут редактировать список покупок
  - Только организатор или администратор может изменить его содержимое и вернуть снова на исполнение


## Проверка выполненной задачи, не привязанной к списку покупок

**Цель:**  
Проверить, что участник мероприятия с ролью **"Создатель"** или **"Администратор"** может подтвердить выполнение задачи со статусом **"На проверке"**, если он сам **не является исполнителем** этой задачи.

**Особые условия проверки прав:**  
- Если **исполнитель задачи — администратор**, проверку может проводить **создатель мероприятия** или **другой администратор**  
- Если **исполнитель — создатель мероприятия**, проверку могут проводить **только администраторы**  
- Если пользователь является **исполнителем** задачи, он **не может** сам подтвердить её выполнение  

**Предусловия:**  
- Пользователь авторизован в системе  
- Пользователь — участник мероприятия с ролью **"Создатель"** или **"Администратор"**  
- Существует задача `Взять плед`  
- Задача **не привязана к списку покупок**  
- Задача имеет статус **"На проверке"**  
- Страница задач мероприятия:  
  https://giga-chill.ru/events/{event_id}/tasks  
  *(где `{event_id}` — ID конкретного мероприятия)*

**Шаги:**  
1. Перейти на страницу задач мероприятия  
2. Найти задачу **"Взять плед"** и открыть её  
3. Убедиться, что текущий пользователь **не является исполнителем** этой задачи  
4. Ввести в поле **"Комментарий"** текст, например:  
   `Хорошо`  
5. Нажать кнопку **"Подтвердить выполнение"**

**Ожидаемый результат:**  
- Окно задачи закрывается  
- Статус задачи меняется на **"Завершена"**  
- Задача отображается во всех списках задач как завершённая


## Проверка выполненной задачи, привязанной к списку покупок

**Цель:**  
Проверить, что участник мероприятия с ролью **"Создатель"** или **"Администратор"** может подтвердить выполнение задачи со статусом **"На проверке"**, если он сам **не является исполнителем** этой задачи.

### Особые условия проверки прав:

- Если **исполнитель задачи — администратор**, проверку может проводить **создатель мероприятия** или **другой администратор**
- Если **исполнитель задачи — создатель мероприятия**, проверку могут проводить **только администраторы**
- **Исполнитель задачи не может сам подтверждать выполнение** этой задачи

### Предусловия:

- Пользователь авторизован в системе  
- Пользователь — участник мероприятия с ролью **"Создатель"** или **"Администратор"**
- Существует задача `Купить напитки`, привязанная к списку покупок `"Напитки"`
- Задача имеет статус **"На проверке"**
- Страница задач мероприятия:  
  https://giga-chill.ru/events/{event_id}/tasks  
  *(где `{event_id}` — ID конкретного мероприятия)*

### Шаги:

1. Перейти на страницу задач мероприятия  
2. Найти задачу **"Купить напитки"** и открыть её  
3. Убедиться, что текущий пользователь **не является исполнителем** задачи  
4. _(Необязательно)_ При необходимости можно:
   - Уточнить список купленных продуктов (отметить или снять галочки)
   - Изменить сумму, потраченную на список
5. Ввести в поле **"Комментарий"** текст, например:  
   `Хорошо`
6. Нажать кнопку **"Подтвердить выполнение"**

### Ожидаемый результат:

- Окно задачи закрывается  
- Статус задачи меняется на **"Завершена"**
- Задача отображается у всех участников мероприятия как завершённая
- В разделе **"Списки покупок"**:
  - Отображается потраченная сумма напротив списка `"Напитки"`  
  - При разворачивании списка видны купленные товары
  - Если все товары были куплены — отображается статус **"Куплен"**
  - Если куплены не все товары — отображается статус **"Частично куплен"**









